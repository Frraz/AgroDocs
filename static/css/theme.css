/* static/css/theme.css */

/* =========================================================
   Paletas, camadas, tokens e dimensões
   ========================================================= */
:root{
  --brand:#3b7a57;
  --brand-600:#2e5f45;
  --bg:#f6f7f9;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --elev:0 1px 2px rgba(0,0,0,.06);
  --focus:0 0 0 .24rem rgba(59,122,87,.28);

  --danger:#b91c1c;
  --danger-bg:#fee2e2;
  --success:#16a34a;
  --warning:#d97706;
  --info:#0ea5e9;

  --radius:10px;
  --radius-card:14px;
  --control-h:40px;
  --fs:1rem;
  --lh:1.25;

  --toggler-icon:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%2364748b' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3/svg%3E");
}

html[data-bs-theme="dark"]{
  --brand:#6aa37a;
  --brand-600:#558a66;
  --bg:#0e1310;
  --card:#121a14;
  --text:#e6efe6;
  --muted:#a3b0a3;
  --border:#1c2a1f;
  --elev:0 1px 3px rgba(0,0,0,.5);
  --focus:0 0 0 .24rem rgba(106,163,122,.28);

  --danger:#fca5a5;
  --danger-bg:#4c1d1d;
  --success:#4ade80;
  --warning:#fbbf24;
  --info:#67e8f9;

  --toggler-icon:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%23a3b0a3' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3/svg%3E");
}

/* =========================================================
   Resets, tipografia e suavização
   ========================================================= */
html,body{height:100%}
body{
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  font-size:var(--fs);
  line-height:var(--lh);
}

/* Seleção de texto harmonizada */
::selection{
  background: color-mix(in srgb, var(--brand) 28%, transparent);
  color: var(--text);
}

/* Autofill (WebKit) coerente com o tema */
input:-webkit-autofill{
  -webkit-text-fill-color: var(--text);
  box-shadow: 0 0 0 40px var(--card) inset !important;
  transition: background-color 9999s ease-in-out 0s;
}

/* Estados desabilitado/readonly */
:disabled,
[readonly].form-control{
  opacity:.8;
  cursor:not-allowed;
}

/* =========================================================
   Transições e microinterações (respeita reduced motion)
   ========================================================= */
@media (prefers-reduced-motion: no-preference){
  .card, .btn, input, select, textarea, .navbar, .nav-link, .alert, .dropdown-menu, .table, .progress-bar{
    transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease, transform .12s ease, opacity .2s ease;
  }
  .fade-in{ animation: fadeIn .26s ease; }
  @keyframes fadeIn { from { opacity:0; transform: translateY(2px); } to { opacity:1; transform:none; } }
}

/* =========================================================
   Overlay de crossfade de tema
   ========================================================= */
.theme-overlay{
  position:fixed; inset:0; z-index:9999;
  background:var(--bg);
  opacity:0; pointer-events:none;
  transition:opacity .28s ease;
}
.theme-overlay.show{ opacity:1; }

/* =========================================================
   Navbar
   ========================================================= */
.navbar-bg{
  background:var(--card);
  border-bottom:1px solid var(--border);
}
.navbar .navbar-brand{ color:var(--text); }
.navbar .nav-link{
  color:var(--muted);
  border-radius:8px;
  padding:.42rem .66rem;
}
.navbar .nav-link:hover,
.navbar .nav-link.active{
  color:var(--brand);
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  font-weight:600;
}
/* Toggler coerente com o tema */
.navbar .navbar-toggler{
  border-color:var(--border);
}
.navbar .navbar-toggler:focus{
  box-shadow:var(--focus);
}
.navbar .navbar-toggler-icon{
  background-image:var(--toggler-icon);
}

/* =========================================================
   Botões
   ========================================================= */
.btn-primary{
  background:var(--brand);
  border-color:var(--brand);
}
.btn-primary:hover{
  background:var(--brand-600);
  border-color:var(--brand-600);
  transform:translateY(-1px);
}
.btn-outline-secondary{
  color:var(--muted);
  border-color:var(--border);
}
.btn-outline-secondary:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
}

/* Botões de ícone (ex.: tema) */
.btn-icon{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--card);
  color:var(--muted);
}
.btn-icon:hover{
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
  transform: translateY(-1px);
}
#themeToggle [data-icon-dark]{ display:none; }
html[data-bs-theme="dark"] #themeToggle [data-icon-dark]{ display:inline-block; }
html[data-bs-theme="dark"] #themeToggle [data-icon-light]{ display:none; }

/* Estados de validação */
.is-invalid, .form-control.is-invalid{
  border-color: var(--danger) !important;
  box-shadow: 0 0 0 .1rem color-mix(in srgb, var(--danger) 35%, transparent);
}
.is-valid, .form-control.is-valid{
  border-color: var(--success) !important;
}

/* =========================================================
   Cards
   ========================================================= */
.card{
  border:1px solid var(--border);
  background:var(--card);
  border-radius:var(--radius-card);
  box-shadow:var(--elev);
}
.card:hover{ box-shadow:0 6px 18px rgba(0,0,0,.06); }
.card .card-body{ padding:1.1rem; } /* compacto */

/* =========================================================
   Tabelas
   ========================================================= */
.table thead th{
  color:var(--muted);
  font-weight:600;
  border-bottom:1px solid var(--border)!important;
  background: color-mix(in srgb, var(--card) 75%, var(--bg));
}
.table tbody td{
  vertical-align:middle;
  border-top:1px solid var(--border);
}
.table-hover tbody tr:hover{
  background: color-mix(in srgb, var(--brand) 8%, var(--card));
}
.table.table-sm td, .table.table-sm th{
  padding:.4rem .5rem;
}

/* =========================================================
   Formulários (compactos e coerentes)
   ========================================================= */
label{
  font-weight:600;
  margin-bottom:.25rem;
  color:var(--text);
}

input,select,textarea{
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:.45rem .65rem;
  background:var(--card);
  color:var(--text);
  height:var(--control-h);
  line-height:var(--lh);
  font-size:var(--fs);
}

input::placeholder, textarea::placeholder{
  color: color-mix(in srgb, var(--muted) 80%, transparent);
}

input:focus,select:focus,textarea:focus{
  border-color:var(--brand);
  box-shadow:var(--focus);
  outline:none;
}

/* Input group – garante MESMO TAMANHO entre usuário e senha
   (fallback quando o input não tem .form-control) */
.input-group{ width:100%; }
.input-group > input,
.input-group > select,
.input-group > textarea{
  flex:1 1 auto;
  width:1%;
  min-width:0;
}
.input-group .form-control,
.input-group .form-select{
  height:var(--control-h);
}
.input-group .input-group-text,
.input-group .btn{
  height:var(--control-h);
  display:inline-flex;
  align-items:center;
  gap:.25rem;
  border-color:var(--border);
  background:var(--card);
  color:var(--muted);
  padding-inline:.6rem;
}
.input-group .btn:hover{
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
}

/* CheckboxSelectMultiple (lembretes) em linha e compacto */
.list-unstyled.d-flex.flex-wrap.gap-3{ margin:.25rem 0 0 0; }
.list-unstyled.d-flex.flex-wrap.gap-3 li{ margin:0; }
.list-unstyled.d-flex.flex-wrap.gap-3 .form-check{ margin:0; }

/* Ajuda/erros */
.form-help{ color:var(--muted); font-size:.92rem; }
.form-error{
  color:var(--danger);
  font-size:.92rem;
  margin-top:.25rem;
}
.alert-danger{
  color:var(--danger);
  background: color-mix(in srgb, var(--danger-bg) 70%, var(--card));
  border-color: color-mix(in srgb, var(--danger) 20%, var(--border));
}

/* Checklist de requisitos da senha (opcional) */
.password-req li{ color:var(--muted); }
.password-req li.text-success{ color:var(--brand) !important; }

/* =========================================================
   intl-tel-input — harmonização (separateDialCode=false)
   ========================================================= */
.iti{ width:100%; position:relative; }
.iti input[type="tel"],
.iti input{
  height:var(--control-h);
  line-height:var(--lh);
  font-size:var(--fs);
}
.iti .iti__flag-container{
  position:absolute; top:0; bottom:0; left:0;
  display:flex; align-items:center;
}
.iti__country-list{
  background:var(--card);
  border:1px solid var(--border);
  box-shadow:var(--elev);
  color:var(--text);
}
.iti__country:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}
.iti__arrow{ border-top-color:var(--muted); opacity:.9; }

/* =========================================================
   Alerts / dropdown
   ========================================================= */
.alert{
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--card) 88%, var(--bg));
}
.dropdown-menu{
  background:var(--card);
  border-color:var(--border);
  box-shadow:var(--elev);
}
.dropdown-item{ color:var(--text); }
.dropdown-item:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}

/* =========================================================
   Footer
   ========================================================= */
footer{
  background: color-mix(in srgb, var(--card) 88%, var(--bg));
}

/* =========================================================
   Flatpickr — harmonização de tema
   ========================================================= */
.flatpickr-calendar{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  box-shadow:var(--elev);
}
.flatpickr-months, .flatpickr-weekdays{
  background: color-mix(in srgb, var(--card) 90%, var(--bg));
}
.flatpickr-day{ color:var(--text); border-radius:8px; }
.flatpickr-day:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}
.flatpickr-day.today{ border-color:var(--brand); }
.flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange{
  background:var(--brand); color:#fff; border-color:var(--brand);
}

/* =========================================================
   Links
   ========================================================= */
a{ color:var(--brand); text-decoration:none; }
a:hover{ color:var(--brand-600); }

/* =========================================================
   Auxiliares (auth e ações)
   ========================================================= */
.auth-wrap{ max-width:480px; margin:3.2rem auto 2rem; }
.auth-card{ padding:1.25rem; }
.actions-row{ display:flex; gap:.5rem; flex-wrap:wrap; }

/* Foco acessível global */
:focus-visible{
  outline:none;
  box-shadow:var(--focus);
  border-radius:var(--radius);
}