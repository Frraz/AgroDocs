/* static/css/theme.css
   UI kit do AgroDocs: tema claro/escuro, tipografia moderna, transições suaves,
   formulários compactos, tabelas responsivas (cards no mobile) e integração com
   componentes comuns (intl-tel-input, flatpickr, Bootstrap toasts/modals/dropdowns).
*/

/* =========================================================
   Paletas, camadas, tokens e dimensões
   ========================================================= */
:root{
  /* Tipografia e layout */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  --fs:1rem;
  --lh:1.25;
  --container-w: 1100px;

  /* Cores base (tema claro) */
  --brand:#3b7a57;
  --brand-600:#2e5f45;
  --bg:#f6f7f9;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;

  /* Estados */
  --danger:#b91c1c;
  --danger-bg:#fee2e2;
  --success:#16a34a;
  --warning:#d97706;
  --info:#0ea5e9;

  /* Elevação e foco */
  --elev:0 1px 2px rgba(0,0,0,.06);
  --elev-md:0 6px 18px rgba(0,0,0,.06);
  --shadow-focus:0 0 0 .24rem rgba(59,122,87,.28);
  --focus: var(--shadow-focus);

  /* Raios e dimensões */
  --radius:10px;
  --radius-card:14px;
  --control-h:40px;

  /* Escala de espaçamento utilitária */
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;

  /* Ícone do toggler da navbar */
  --toggler-icon:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%2364748b' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

html[data-bs-theme="dark"]{
  --brand:#6aa37a;
  --brand-600:#558a66;
  --bg:#0e1310;
  --card:#121a14;
  --text:#e6efe6;
  --muted:#a3b0a3;
  --border:#1c2a1f;

  --danger:#fca5a5;
  --danger-bg:#4c1d1d;
  --success:#4ade80;
  --warning:#fbbf24;
  --info:#67e8f9;

  --elev:0 1px 3px rgba(0,0,0,.5);
  --elev-md:0 10px 30px rgba(0,0,0,.55);
  --shadow-focus:0 0 0 .24rem rgba(106,163,122,.28);
  --focus: var(--shadow-focus);

  --toggler-icon:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%23a3b0a3' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

/* =========================================================
   Resets, tipografia e suavização
   ========================================================= */
html,body{height:100%}
body{
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  font-size:var(--fs);
  line-height:var(--lh);
  font-family: var(--font-sans);
}

.container{ max-width: var(--container-w); }

/* Seleção de texto harmonizada */
::selection{
  background: color-mix(in srgb, var(--brand) 28%, transparent);
  color: var(--text);
}

/* Scrollbar (webkit) consistente com o tema */
*::-webkit-scrollbar{ width: 10px; height: 10px; }
*::-webkit-scrollbar-track{ background: color-mix(in srgb, var(--card) 60%, var(--bg)); }
*::-webkit-scrollbar-thumb{ background: color-mix(in srgb, var(--muted) 35%, var(--card)); border-radius: 9999px; }
*::-webkit-scrollbar-thumb:hover{ background: color-mix(in srgb, var(--muted) 55%, var(--card)); }

/* Autofill (WebKit) coerente com o tema */
input:-webkit-autofill{
  -webkit-text-fill-color: var(--text);
  box-shadow: 0 0 0 40px var(--card) inset !important;
  transition: background-color 9999s ease-in-out 0s;
}

/* Estados desabilitado/readonly */
:disabled,
[readonly].form-control{
  opacity:.8;
  cursor:not-allowed;
}

/* =========================================================
   Transições e microinterações (respeita reduced motion)
   ========================================================= */
@media (prefers-reduced-motion: no-preference){
  .card, .btn, input, select, textarea, .navbar, .nav-link, .alert, .dropdown-menu, .table, .progress-bar, .modal-content{
    transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease, transform .12s ease, opacity .2s ease;
  }
  .fade-in{ animation: fadeIn .26s ease; }
  @keyframes fadeIn { from { opacity:0; transform: translateY(2px); } to { opacity:1; transform:none; } }
}

/* =========================================================
   Overlay de crossfade de tema
   ========================================================= */
.theme-overlay{
  position:fixed; inset:0; z-index:9999;
  background:var(--bg);
  opacity:0; pointer-events:none;
  transition:opacity .28s ease;
}
.theme-overlay.show{ opacity:1; }

/* =========================================================
   Navbar
   ========================================================= */
.navbar-bg{
  background:var(--card);
  border-bottom:1px solid var(--border);
}
.navbar .navbar-brand{ color:var(--text); font-weight: 800; letter-spacing: .2px; }
.navbar .nav-link{
  color:var(--muted);
  border-radius:8px;
  padding:.42rem .66rem;
}
.navbar .nav-link:hover,
.navbar .nav-link.active{
  color:var(--brand);
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  font-weight:600;
}
/* Navbar com efeito de blur ao rolar (opcional, adicione .navbar-bg-blur) */
.navbar-bg-blur{
  backdrop-filter: saturate(180%) blur(8px);
  background: color-mix(in srgb, var(--card) 80%, transparent);
  border-bottom:1px solid var(--border);
}
/* Toggler coerente com o tema */
.navbar .navbar-toggler{
  border-color:var(--border);
}
.navbar .navbar-toggler:focus{
  box-shadow:var(--focus);
}
.navbar .navbar-toggler-icon{
  background-image:var(--toggler-icon);
}

/* =========================================================
   Botões
   ========================================================= */
.btn{
  border-radius: var(--radius);
  border: 1px solid transparent;
}
.btn:active{ transform: translateY(1px); }

.btn-primary{
  background:var(--brand);
  border-color:var(--brand);
  color: #fff;
}
.btn-primary:hover{
  background:var(--brand-600);
  border-color:var(--brand-600);
  transform:translateY(-1px);
}
.btn-outline-secondary{
  color:var(--muted);
  border-color:var(--border);
}
.btn-outline-secondary:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
}
.btn-success{ background: var(--success); border-color: var(--success); color:#fff; }
.btn-outline-success{ color: var(--success); border-color: var(--success); }
.btn-outline-success:hover{ background: var(--success); color:#fff; }
.btn-danger{ background: var(--danger); border-color: var(--danger); color:#fff; }
.btn-outline-danger{ color: var(--danger); border-color: var(--danger); }
.btn-outline-danger:hover{ background: var(--danger); color:#fff; }

/* Botões de ícone (ex.: tema) */
.btn-icon{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--card);
  color:var(--muted);
}
.btn-icon:hover{
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
  transform: translateY(-1px);
}
#themeToggle [data-icon-dark]{ display:none; }
html[data-bs-theme="dark"] #themeToggle [data-icon-dark]{ display:inline-block; }
html[data-bs-theme="dark"] #themeToggle [data-icon-light]{ display:none; }

/* =========================================================
   Estados de validação
   ========================================================= */
.is-invalid, .form-control.is-invalid, .form-select.is-invalid{
  border-color: var(--danger) !important;
  box-shadow: 0 0 0 .1rem color-mix(in srgb, var(--danger) 35%, transparent);
}
.is-valid, .form-control.is-valid, .form-select.is-valid{
  border-color: var(--success) !important;
}
.invalid-feedback{ color: var(--danger); }

/* =========================================================
   Cards
   ========================================================= */
.card{
  border:1px solid var(--border);
  background:var(--card);
  border-radius:var(--radius-card);
  box-shadow:var(--elev);
}
.card:hover{ box-shadow:var(--elev-md); }
.card .card-body{ padding:1.1rem; } /* compacto */
.card-header{ background: transparent; border-bottom: 1px solid var(--border); }

/* =========================================================
   Tabelas
   ========================================================= */
.table thead th{
  color:var(--muted);
  font-weight:600;
  border-bottom:1px solid var(--border)!important;
  background: color-mix(in srgb, var(--card) 75%, var(--bg));
}
.table tbody td{
  vertical-align:middle;
  border-top:1px solid var(--border);
}
.table-hover tbody tr:hover{
  background: color-mix(in srgb, var(--brand) 8%, var(--card));
}
.table.table-sm td, .table.table-sm th{
  padding:.4rem .5rem;
}
/* Cabeçalho fixo opcional (adicione .table-sticky-header ao wrapper .table-responsive) */
.table-sticky-header thead th{ position: sticky; top: 0; z-index: 2; }

/* Tabelas viram cartões no mobile usando data-th */
@media (max-width: 768px) {
  .table-responsive-stack table,
  .table-responsive-stack thead,
  .table-responsive-stack tbody,
  .table-responsive-stack th,
  .table-responsive-stack td,
  .table-responsive-stack tr { display: block; width: 100%; }
  .table-responsive-stack thead { display: none; }
  .table-responsive-stack tr {
    margin-bottom: .75rem;
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    padding: .5rem;
    background: var(--card);
  }
  .table-responsive-stack td {
    border: none;
    position: relative;
    padding-left: 45%;
    min-height: 38px;
  }
  .table-responsive-stack td::before {
    position: absolute; top: .5rem; left: .75rem; width: 38%;
    color: var(--muted); content: attr(data-th); font-weight: 600;
  }
  .text-end { text-align: left !important; margin-top: .5rem; }
}

/* =========================================================
   Formulários (compactos e coerentes)
   ========================================================= */
label{
  font-weight:600;
  margin-bottom:.25rem;
  color:var(--text);
}

input,select,textarea{
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:.45rem .65rem;
  background:var(--card);
  color:var(--text);
  height:var(--control-h);
  line-height:var(--lh);
  font-size:var(--fs);
}

input::placeholder, textarea::placeholder{
  color: color-mix(in srgb, var(--muted) 80%, transparent);
}

input:focus,select:focus,textarea:focus{
  border-color:var(--brand);
  box-shadow:var(--focus);
  outline:none;
}

/* Input group – garante MESMO TAMANHO entre usuário e senha
   (fallback quando o input não tem .form-control) */
.input-group{ width:100%; }
.input-group > input,
.input-group > select,
.input-group > textarea{
  flex:1 1 auto;
  width:1%;
  min-width:0;
}
.input-group .form-control,
.input-group .form-select{
  height:var(--control-h);
}
.input-group .input-group-text,
.input-group .btn{
  height:var(--control-h);
  display:inline-flex;
  align-items:center;
  gap:.25rem;
  border-color:var(--border);
  background:var(--card);
  color:var(--muted);
  padding-inline:.6rem;
}
.input-group .btn:hover{
  color:var(--brand);
  border-color: color-mix(in srgb, var(--brand) 40%, var(--border));
}

/* CheckboxSelectMultiple (lembretes) em linha e compacto */
.list-unstyled.d-flex.flex-wrap.gap-3{ margin:.25rem 0 0 0; }
.list-unstyled.d-flex.flex-wrap.gap-3 li{ margin:0; }
.list-unstyled.d-flex.flex-wrap.gap-3 .form-check{ margin:0; }

/* Ajuda/erros */
.form-help{ color:var(--muted); font-size:.92rem; }
.form-error{
  color:var(--danger);
  font-size:.92rem;
  margin-top:.25rem;
}
.alert-danger{
  color:var(--danger);
  background: color-mix(in srgb, var(--danger-bg) 70%, var(--card));
  border-color: color-mix(in srgb, var(--danger) 20%, var(--border));
}

/* Checklist de requisitos da senha (opcional) */
.password-req li{ color:var(--muted); }
.password-req li.text-success{ color:var(--brand) !important; }

/* =========================================================
   intl-tel-input — harmonização (separateDialCode=false)
   ========================================================= */
.iti{ width:100%; position:relative; }
.iti input[type="tel"],
.iti input{
  height:var(--control-h);
  line-height:var(--lh);
  font-size:var(--fs);
}
.iti .iti__flag-container{
  position:absolute; top:0; bottom:0; left:0;
  display:flex; align-items:center;
}
.iti__country-list{
  background:var(--card);
  border:1px solid var(--border);
  box-shadow:var(--elev);
  color:var(--text);
}
.iti__country:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}
.iti__arrow{ border-top-color:var(--muted); opacity:.9; }

/* =========================================================
   Alerts / dropdown / modals / toasts
   ========================================================= */
.alert{
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--card) 88%, var(--bg));
}
.dropdown-menu, .modal-content{
  background:var(--card);
  border-color:var(--border);
  box-shadow:var(--elev);
  color: var(--text);
}
.dropdown-item{ color:var(--text); }
.dropdown-item:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}

/* Toasts (Bootstrap compatível e também simples .toast-container custom) */
.toast-container{
  position: fixed; top: 1rem; right: 1rem; z-index: 1060; display: flex; flex-direction: column; gap: .5rem;
}
.toast{
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-card);
  box-shadow: var(--elev);
  padding: .75rem 1rem;
  min-width: 260px;
}
.toast .title{ font-weight: 700; margin-bottom: .25rem; }
.toast.success{ border-color: color-mix(in srgb, var(--success) 60%, var(--border)); }
.toast.error{ border-color: color-mix(in srgb, var(--danger) 60%, var(--border)); }
.toast.info{ border-color: color-mix(in srgb, var(--info) 60%, var(--border)); }

/* =========================================================
   Footer
   ========================================================= */
footer{
  background: color-mix(in srgb, var(--card) 88%, var(--bg));
}

/* =========================================================
   Flatpickr — harmonização de tema
   ========================================================= */
.flatpickr-calendar{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  box-shadow:var(--elev);
}
.flatpickr-months, .flatpickr-weekdays{
  background: color-mix(in srgb, var(--card) 90%, var(--bg));
}
.flatpickr-day{ color:var(--text); border-radius:8px; }
.flatpickr-day:hover{
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}
.flatpickr-day.today{ border-color:var(--brand); }
.flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange{
  background:var(--brand); color:#fff; border-color:var(--brand);
}

/* =========================================================
   Links
   ========================================================= */
a{ color:var(--brand); text-decoration:none; }
a:hover{ color:var(--brand-600); }

/* Links discretos para ações secundárias */
.link-muted{ color: var(--muted); text-decoration: none; }
.link-muted:hover{ color: var(--brand); text-decoration: underline; }

/* =========================================================
   Auxiliares (auth e ações)
   ========================================================= */
.auth-wrap{ max-width:480px; margin:3.2rem auto 2rem; }
.auth-card{ padding:1.25rem; }
.actions-row{ display:flex; gap:.5rem; flex-wrap:wrap; }

/* Badges/chips utilitários */
.badge{
  border-radius: 9999px;
  padding: .35rem .6rem;
  border: 1px solid var(--border);
  font-weight: 600;
  background: color-mix(in srgb, var(--card) 85%, var(--bg));
  color: var(--text);
}
.badge-success{ background: color-mix(in srgb, var(--success) 18%, transparent); color: var(--success); border-color: color-mix(in srgb, var(--success) 35%, var(--border)); }
.badge-danger{ background: color-mix(in srgb, var(--danger) 18%, transparent); color: var(--danger); border-color: color-mix(in srgb, var(--danger) 35%, var(--border)); }
.badge-info{ background: color-mix(in srgb, var(--info) 18%, transparent); color: var(--info); border-color: color-mix(in srgb, var(--info) 35%, var(--border)); }

/* Foco acessível global */
:focus-visible{
  outline:none;
  box-shadow:var(--focus);
  border-radius:var(--radius);
}